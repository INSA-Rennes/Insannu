<!doctype html>
<html ng-app="insannu">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>INSANNU</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
  </head>

  <body ng-controller="SearchController">
    <div class="jumbotron">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center">
            <h1 class="animated">INSANNU</h1>
            <form role="form">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" class="form-control" ng-model-options="{debounce: {'default': 400, 'blur': 800}}" ng-model="search" placeholder="Justin Bieber, Kevin, 2STPI, GMA...">
                  <span class="input-group-addon">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center" ng-hide="loaded">
          <img src="/img/loader.gif">
        </div>

        <div class="col-lg-12" ng-hide="search.length > 0">
          <div class="panel panel-default">
            <div class="panel-body">
              <!-- '3INFO','3SRC','3EII','3GMA','3GCU','3SGM','3GM','4INFO','4SRC','4EII','4GMA','4GCU','4SGM','5INFO','5SRC','5EII','5GMA','5GCU','5SGM','Doctorants' -->
              <p>
                <h3>Chercher par promo</h3>
                <span ng-repeat="promoElem in ['STPI','INFO','SRC','EII','GMA','GCU','SGM','GM','Doctorant']">
                  <span class="label label-success" >
                    <a href="" ng-click="activated=!activated">{{ promoElem }}</a>
                  </span>
                  <span ng-show="activated && promoElem != 'STPI' && promoElem != 'Doctorant'">
                    <span class="label label-warning">
                      <a href="" ng-click="setSearch(promoElem)">Tous</a>
                    </span>
                    <span class="label label-warning" ng-repeat="annee in [3,4,5]">
                      <a href="" ng-click="setSearch(annee+promoElem)">{{ annee + promoElem }}</a>
                    </span>
                  </span>
                  <span ng-show="activated && promoElem == 'STPI'">
                    <span class="label label-warning">
                      <a href="" ng-click="setSearch(promoElem)">Tous</a>
                    </span>
                    <span class="label label-warning" ng-repeat="annee in [1,2]">
                      <a href="" ng-click="setSearch(annee+promoElem)">{{ annee + promoElem }}</a>
                    </span>
                  </span>
                  <span ng-show="activated && promoElem == 'Doctorant'">
                    <span class="label label-warning">
                      <a href="" ng-click="setSearch(promoElem)">Tous</a>
                    </span>
                  </span>
                </span>

              </p>
            </div>
          </div>
        </div>

        <div ng-show="loaded && search.length > 1" class="col-lg-12">
          <div class="panel panel-default animated" ng-class="{fadeInUp: students.length > 1, fadeOutUp: students.length < 2}">
            <div class="panel-body">
              <span style="margin-bottom:0px" class="lead pull-left">{{ students.length }} insaliens</span>
              
              <a href="mailto:{{ listEmail }}" class="btn btn-default btn-sm pull-right">email</a>
            </div>
          </div>
        </div>
        <div class="col-lg-6" ng-repeat="student in students">
          <div class="panel panel-default animated fadeInUp">
            <div class="panel-body">
              <div class="pull-left">
                <img ng-show="student.picture != ''" height="137" class="profile" src="/bucket/{{ student.picture }}.jpg" alt="">
                <img ng-show="student.picture == '' && student.fb_id == ''" height="137" class="profile" src="/img/default.jpg" alt="">
              </div>
              <div class="pull-left" ng-init="full=false; name = student.first_name + ' ' + student.last_name">
                <h3 ng-show="name.length < 22 || full">{{ name }}</h3>
                <h3 ng-hide="name.length < 22 || full" tooltip="{{name}}">{{ name | limitTo: 20 }}<a href="" ng-click="full=true">...</a></h3>
                <p>
                  <span class="label label-danger">{{student.gender}}</span>
                  <span class="label label-success"><a href="" ng-click="setSearch(student.year+student.department)">{{ student.year + student.department}}</a></span>
                  <span class="label label-warning">{{student.room}}</span>
                  <span class="label label-info">{{student.tags}}</span>
                </p>
                <p>
                  <a href="mailto:{{ student.mail }}" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-envelope"></span> <small>{{ student.mail }}</small></a>
                  <a ng-show="student.fb_id != ''" href="https://www.facebook.com/{{student.fb_id}}" class="btn btn-primary btn-xs"><small>Facebook</small></a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="js/angular.min.js" ></script>
    <script src="js/angular-resource.min.js" ></script>
    <script src="js/custom.js" ></script>
  </body>
</html>
